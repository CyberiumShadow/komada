

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: classes/loader.js | Komada</title>
    <link rel="shortcut icon" href="img/favicon.ico">

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 100px; height: 100px">
        
            <a href="https://github.com/dirigeants/komada" rel="noopener noreferrer" target="_blank">
                <img src="https://cdn.discordapp.com/avatars/275809850422722560/4e85b97ec4d79f709bbedd849c0e6ad9.png?size=256" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Komada</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="api-tab">
                <a href="#"><h4>Documentation</h4></a>
            </li>
            <li id="examples-tab">
                <a href="#"><h4>Examples</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Examples</h3><ul><li><a href="tutorial-PermissionLevels_.html">PermissionLevels</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PermissionLevels_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="PermissionLevels.html#levels">levels</a></li><li><a href="PermissionLevels.html#size">size</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="PermissionLevels.html#add">add</a></li><li><a href="PermissionLevels.html#reset">reset</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="PermissionLevels.html#.permLevel">permLevel</a></li></ul></div></li><li><a href="tutorial-SettingGateway.html">SettingGateway</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SettingGateway_sub"></div></li><li><a href="tutorial-UnderstandingUsageString.html">UnderstandingUsageString</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="UnderstandingUsageString_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Modules</h3><ul><li><a href="module-Command.html">Command</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Command_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Command.html#.conf">conf</a></li><li><a href="module-Command.html#.help">help</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Command.html#.run">run</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Command.html#~Conf">Conf</a></li><li><a href="module-Command.html#~Help">Help</a></li></ul></div></li><li><a href="module-Event.html">Event</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Event_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Event.html#.run">run</a></li></ul></div></li><li><a href="module-Extendable.html">Extendable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Extendable_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Extendable.html#.conf">conf</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Extendable.html#.extend">extend</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Extendable.html#~Conf">Conf</a></li></ul></div></li><li><a href="module-Finalizer.html">Finalizer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Finalizer_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Finalizer.html#.conf">conf</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Finalizer.html#.run">run</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Finalizer.html#~Conf">Conf</a></li></ul></div></li><li><a href="module-Functions.html">Functions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Functions_sub"></div></li><li><a href="module-Inhibitor.html">Inhibitor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Inhibitor_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Inhibitor.html#.conf">conf</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Inhibitor.html#.run">run</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Inhibitor.html#~Conf">Conf</a></li></ul></div></li><li><a href="module-Monitor.html">Monitor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Monitor_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Monitor.html#.conf">conf</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Monitor.html#.run">run</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Monitor.html#~Conf">Conf</a></li></ul></div></li><li><a href="module-Provider.html">Provider</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Provider_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Provider.html#.conf">conf</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Provider.html#.create">create</a></li><li><a href="module-Provider.html#.createTable">createTable</a></li><li><a href="module-Provider.html#.delete">delete</a></li><li><a href="module-Provider.html#.get">get</a></li><li><a href="module-Provider.html#.getAll">getAll</a></li><li><a href="module-Provider.html#.hasTable">hasTable</a></li><li><a href="module-Provider.html#.replace">replace</a></li><li><a href="module-Provider.html#.update">update</a></li></ul></div></li><li><a href="module-ProviderSQL.html">ProviderSQL</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:ProviderSQL_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-ProviderSQL.html#.CONSTANTS">CONSTANTS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-ProviderSQL.html#.sanitize">sanitize</a></li><li><a href="module-ProviderSQL.html#.serialize">serialize</a></li><li><a href="module-ProviderSQL.html#.updateColumns">updateColumns</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Externals</h3><ul><li><a href="Discord.js.external_Channel.html">Channel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Channel_sub"></div></li><li><a href="Discord.js.external_Client.html">Client</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Client_sub"></div></li><li><a href="Discord.js.external_Collection.html">Collection</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Collection_sub"></div></li><li><a href="Discord.js.external_DiscordJSConfig.html">DiscordJSConfig</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:DiscordJSConfig_sub"></div></li><li><a href="Discord.js.external_DMChannel.html">DMChannel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:DMChannel_sub"></div></li><li><a href="Discord.js.external_Emoji.html">Emoji</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Emoji_sub"></div></li><li><a href="Discord.js.external_GroupDMChannel.html">GroupDMChannel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:GroupDMChannel_sub"></div></li><li><a href="Discord.js.external_Guild.html">Guild</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Guild_sub"></div></li><li><a href="Discord.js.external_GuildMember.html">GuildMember</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:GuildMember_sub"></div></li><li><a href="Discord.js.external_GuildResolvable.html">GuildResolvable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:GuildResolvable_sub"></div></li><li><a href="Discord.js.external_Message.html">Message</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Message_sub"></div></li><li><a href="Discord.js.external_MessageAttachment.html">MessageAttachment</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:MessageAttachment_sub"></div></li><li><a href="Discord.js.external_MessageEmbed.html">MessageEmbed</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:MessageEmbed_sub"></div></li><li><a href="Discord.js.external_MessageOptions.html">MessageOptions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:MessageOptions_sub"></div></li><li><a href="Discord.js.external_MessageReaction.html">MessageReaction</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:MessageReaction_sub"></div></li><li><a href="Discord.js.external_ReactionEmoji.html">ReactionEmoji</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:ReactionEmoji_sub"></div></li><li><a href="Discord.js.external_Role.html">Role</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Role_sub"></div></li><li><a href="Discord.js.external_ShardingManager.html">ShardingManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:ShardingManager_sub"></div></li><li><a href="Discord.js.external_StringResolvable.html">StringResolvable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:StringResolvable_sub"></div></li><li><a href="Discord.js.external_TextChannel.html">TextChannel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:TextChannel_sub"></div></li><li><a href="Discord.js.external_User.html">User</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:User_sub"></div></li><li><a href="Discord.js.external_UserResolvable.html">UserResolvable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:UserResolvable_sub"></div></li><li><a href="Discord.js.external_VoiceChannel.html">VoiceChannel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:VoiceChannel_sub"></div></li><li><a href="Discord.js.external_Webhook.html">Webhook</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Discord.js.external:Webhook_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="ArgResolver.html">ArgResolver</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ArgResolver_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ArgResolver.html#bool">bool</a></li><li><a href="ArgResolver.html#boolean">boolean</a></li><li><a href="ArgResolver.html#channel">channel</a></li><li><a href="ArgResolver.html#float">float</a></li><li><a href="ArgResolver.html#guild">guild</a></li><li><a href="ArgResolver.html#int">int</a></li><li><a href="ArgResolver.html#integer">integer</a></li><li><a href="ArgResolver.html#literal">literal</a></li><li><a href="ArgResolver.html#member">member</a></li><li><a href="ArgResolver.html#mention">mention</a></li><li><a href="ArgResolver.html#message">message</a></li><li><a href="ArgResolver.html#msg">msg</a></li><li><a href="ArgResolver.html#msgs">msgs</a></li><li><a href="ArgResolver.html#num">num</a></li><li><a href="ArgResolver.html#number">number</a></li><li><a href="ArgResolver.html#role">role</a></li><li><a href="ArgResolver.html#str">str</a></li><li><a href="ArgResolver.html#string">string</a></li><li><a href="ArgResolver.html#url">url</a></li><li><a href="ArgResolver.html#user">user</a></li></ul></div></li><li><a href="Duration.html">Duration</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Duration_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Duration.html#day">day</a></li><li><a href="Duration.html#hour">hour</a></li><li><a href="Duration.html#minute">minute</a></li><li><a href="Duration.html#second">second</a></li><li><a href="Duration.html#week">week</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Duration.html#.format">format</a></li></ul></div></li><li><a href="Gateway.html">Gateway</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Gateway_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Gateway.html#.settings">settings</a></li><li><a href="Gateway.html#cache">cache</a></li><li><a href="Gateway.html#client">client</a></li><li><a href="Gateway.html#engine">engine</a></li><li><a href="Gateway.html#provider">provider</a></li><li><a href="Gateway.html#resolver">resolver</a></li><li><a href="Gateway.html#schema">schema</a></li><li><a href="Gateway.html#sql">sql</a></li><li><a href="Gateway.html#type">type</a></li><li><a href="Gateway.html#validate">validate</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Gateway.html#create">create</a></li><li><a href="Gateway.html#destroy">destroy</a></li><li><a href="Gateway.html#ensureCreate">ensureCreate</a></li><li><a href="Gateway.html#get">get</a></li><li><a href="Gateway.html#init">init</a></li><li><a href="Gateway.html#reset">reset</a></li><li><a href="Gateway.html#sync">sync</a></li><li><a href="Gateway.html#update">update</a></li><li><a href="Gateway.html#updateArray">updateArray</a></li></ul></div></li><li><a href="Komada.html">Komada</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Komada_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Komada.html#aliases">aliases</a></li><li><a href="Komada.html#application">application</a></li><li><a href="Komada.html#argResolver">argResolver</a></li><li><a href="Komada.html#clientBaseDir">clientBaseDir</a></li><li><a href="Komada.html#commandFinalizers">commandFinalizers</a></li><li><a href="Komada.html#commandInhibitors">commandInhibitors</a></li><li><a href="Komada.html#commandMessageLifetime">commandMessageLifetime</a></li><li><a href="Komada.html#commandMessages">commandMessages</a></li><li><a href="Komada.html#commandMessageSweep">commandMessageSweep</a></li><li><a href="Komada.html#commands">commands</a></li><li><a href="Komada.html#config">config</a></li><li><a href="Komada.html#console">console</a></li><li><a href="Komada.html#coreBaseDir">coreBaseDir</a></li><li><a href="Komada.html#eventHandlers">eventHandlers</a></li><li><a href="Komada.html#funcs">funcs</a></li><li><a href="Komada.html#invite">invite</a></li><li><a href="Komada.html#messageMonitors">messageMonitors</a></li><li><a href="Komada.html#methods">methods</a></li><li><a href="Komada.html#owner">owner</a></li><li><a href="Komada.html#permStructure">permStructure</a></li><li><a href="Komada.html#providers">providers</a></li><li><a href="Komada.html#ready">ready</a></li><li><a href="Komada.html#settings">settings</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Komada.html#login">login</a></li><li><a href="Komada.html#sweepCommandMessages">sweepCommandMessages</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="Komada.html#.Options">Options</a></li><li><a href="Komada.html#.OptionsDisabled">OptionsDisabled</a></li><li><a href="Komada.html#.OptionsProviders">OptionsProviders</a></li></ul></div></li><li><a href="KomadaConsole.html">KomadaConsole</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="KomadaConsole_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="KomadaConsole.html#colors">colors</a></li><li><a href="KomadaConsole.html#stderr">stderr</a></li><li><a href="KomadaConsole.html#stdout">stdout</a></li><li><a href="KomadaConsole.html#timestamps">timestamps</a></li><li><a href="KomadaConsole.html#useColors">useColors</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="KomadaConsole.html#.flatten">flatten</a></li><li><a href="KomadaConsole.html#_debug">_debug</a></li><li><a href="KomadaConsole.html#_error">_error</a></li><li><a href="KomadaConsole.html#_log">_log</a></li><li><a href="KomadaConsole.html#_verbose">_verbose</a></li><li><a href="KomadaConsole.html#_warn">_warn</a></li><li><a href="KomadaConsole.html#_wtf">_wtf</a></li><li><a href="KomadaConsole.html#log">log</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="KomadaConsole.html#.BackgroundColorTypes">BackgroundColorTypes</a></li><li><a href="KomadaConsole.html#.ColorObjects">ColorObjects</a></li><li><a href="KomadaConsole.html#.Colors">Colors</a></li><li><a href="KomadaConsole.html#.MessageObject">MessageObject</a></li><li><a href="KomadaConsole.html#.StyleTypes">StyleTypes</a></li><li><a href="KomadaConsole.html#.TextColorTypes">TextColorTypes</a></li><li><a href="KomadaConsole.html#.TimeObject">TimeObject</a></li></ul></div></li><li><a href="ParsedUsage.html">ParsedUsage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ParsedUsage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="ParsedUsage.html#client">client</a></li><li><a href="ParsedUsage.html#commands">commands</a></li><li><a href="ParsedUsage.html#deliminatedUsage">deliminatedUsage</a></li><li><a href="ParsedUsage.html#names">names</a></li><li><a href="ParsedUsage.html#nearlyFullUsage">nearlyFullUsage</a></li><li><a href="ParsedUsage.html#parsedUsage">parsedUsage</a></li><li><a href="ParsedUsage.html#usageString">usageString</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="ParsedUsage.html#fullUsage">fullUsage</a></li></ul></div></li><li><a href="PermissionLevels.html">PermissionLevels</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PermissionLevels_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="PermissionLevels.html#levels">levels</a></li><li><a href="PermissionLevels.html#size">size</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="PermissionLevels.html#add">add</a></li><li><a href="PermissionLevels.html#reset">reset</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="PermissionLevels.html#.permLevel">permLevel</a></li></ul></div></li><li><a href="Resolver.html">Resolver</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Resolver_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Resolver.html#boolean">boolean</a></li><li><a href="Resolver.html#channel">channel</a></li><li><a href="Resolver.html#float">float</a></li><li><a href="Resolver.html#guild">guild</a></li><li><a href="Resolver.html#integer">integer</a></li><li><a href="Resolver.html#member">member</a></li><li><a href="Resolver.html#msg">msg</a></li><li><a href="Resolver.html#msgs">msgs</a></li><li><a href="Resolver.html#role">role</a></li><li><a href="Resolver.html#string">string</a></li><li><a href="Resolver.html#url">url</a></li><li><a href="Resolver.html#user">user</a></li></ul></div></li><li><a href="Schema.html">Schema</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Schema_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Schema.html#defaults">defaults</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Schema.html#add">add</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="Schema.html#.Options">Options</a></li><li><a href="Schema.html#.Types">Types</a></li></ul></div></li><li><a href="SettingResolver.html">SettingResolver</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SettingResolver_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="SettingResolver.html#.maxOrMin">maxOrMin</a></li><li><a href="SettingResolver.html#boolean">boolean</a></li><li><a href="SettingResolver.html#channel">channel</a></li><li><a href="SettingResolver.html#float">float</a></li><li><a href="SettingResolver.html#guild">guild</a></li><li><a href="SettingResolver.html#integer">integer</a></li><li><a href="SettingResolver.html#member">member</a></li><li><a href="SettingResolver.html#msg">msg</a></li><li><a href="SettingResolver.html#msgs">msgs</a></li><li><a href="SettingResolver.html#role">role</a></li><li><a href="SettingResolver.html#string">string</a></li><li><a href="SettingResolver.html#url">url</a></li><li><a href="SettingResolver.html#user">user</a></li></ul></div></li><li><a href="Settings.html">Settings</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Settings_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Settings.html#baseDir">baseDir</a></li><li><a href="Settings.html#cache">cache</a></li><li><a href="Settings.html#gateway">gateway</a></li><li><a href="Settings.html#resolver">resolver</a></li><li><a href="Settings.html#schema">schema</a></li><li><a href="Settings.html#schemaPath">schemaPath</a></li><li><a href="Settings.html#type">type</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Settings.html#add">add</a></li><li><a href="Settings.html#create">create</a></li><li><a href="Settings.html#destroy">destroy</a></li><li><a href="Settings.html#get">get</a></li><li><a href="Settings.html#init">init</a></li><li><a href="Settings.html#remove">remove</a></li><li><a href="Settings.html#reset">reset</a></li><li><a href="Settings.html#update">update</a></li><li><a href="Settings.html#updateArray">updateArray</a></li><li><a href="Settings.html#validateSchema">validateSchema</a></li></ul></div></li><li><a href="SettingsCache.html">SettingsCache</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SettingsCache_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="SettingsCache.html#client">client</a></li><li><a href="SettingsCache.html#defaultDataSchema">defaultDataSchema</a></li><li><a href="SettingsCache.html#guilds">guilds</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="SettingsCache.html#add">add</a></li><li><a href="SettingsCache.html#validate">validate</a></li></ul></div></li><li><a href="SQL.html">SQL</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SQL_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="SQL.html#client">client</a></li><li><a href="SQL.html#constants">constants</a></li><li><a href="SQL.html#defaults">defaults</a></li><li><a href="SQL.html#gateway">gateway</a></li><li><a href="SQL.html#provider">provider</a></li><li><a href="SQL.html#sanitizer">sanitizer</a></li><li><a href="SQL.html#schema">schema</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="SQL.html#buildSingleSQLSchema">buildSingleSQLSchema</a></li><li><a href="SQL.html#buildSQLSchema">buildSQLSchema</a></li><li><a href="SQL.html#deserializer">deserializer</a></li><li><a href="SQL.html#initDeserialize">initDeserialize</a></li><li><a href="SQL.html#updateColumns">updateColumns</a></li></ul></div></li><li><a href="Stopwatch.html">Stopwatch</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Stopwatch_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Stopwatch.html#digits">digits</a></li><li><a href="Stopwatch.html#duration">duration</a></li><li><a href="Stopwatch.html#friendlyDuration">friendlyDuration</a></li><li><a href="Stopwatch.html#running">running</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Stopwatch.html#reset">reset</a></li><li><a href="Stopwatch.html#restart">restart</a></li><li><a href="Stopwatch.html#start">start</a></li><li><a href="Stopwatch.html#stop">stop</a></li><li><a href="Stopwatch.html#toString">toString</a></li></ul></div></li><li><a href="Timestamp.html">Timestamp</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Timestamp_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Timestamp.html#.format">format</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const fs = require("fs-nextra");
const { sep, resolve, join } = require("path");
const Discord = require("discord.js");
const ParsedUsage = require("./parsedUsage");

const disabled = {
  command: [],
  finalizer: [],
  inhibitor: [],
  monitor: [],
};

class Loader {

  constructor(client) {
    Object.defineProperty(this, "client", { value: client });
    const makeDirsObject = dir => ({
      functions: resolve(dir, "functions"),
      commands: resolve(dir, "commands"),
      inhibitors: resolve(dir, "inhibitors"),
      finalizers: resolve(dir, "finalizers"),
      events: resolve(dir, "events"),
      monitors: resolve(dir, "monitors"),
      providers: resolve(dir, "providers"),
      extendables: resolve(dir, "extendables"),
    });

    /**
     * An object containing string paths to piece folders for the core of Komada
     * @type {Object}
     */
    Object.defineProperty(this, "coreDirs", { value: makeDirsObject(this.client.coreBaseDir) });

    /**
     * An object containing string paths to piece folders for the user side of Komada
     * @type {Object}
     */
    Object.defineProperty(this, "clientDirs", { value: makeDirsObject(this.client.clientBaseDir) });

    Object.defineProperty(this, "_disabled", { value: null, writable: true });
  }

  async loadAll() {
    this._disabled = await fs.readJSON(resolve(this.client.clientBaseDir, "bwd", "disabled.json"))
      .catch(() => fs.outputJSONAtomic(resolve(this.client.clientBaseDir, "bwd", "disabled.json"), disabled)
        .then(() => disabled));
    await Promise.all([
      this._loadEvents(),
      this._loadFunctions(),
      this._loadCommands(),
      this._loadInhibitors(),
      this._loadFinalizers(),
      this._loadMonitors(),
      this._loadProviders(),
      this._loadExtendables(),
    ]).catch((error) => {
      console.error(error);
      process.exit();
    });
  }

  async _traverse(dir, fileArray = []) {
    try {
      const res = await fs.readdir(dir);
      const files = res.filter(thing => thing.endsWith(".js"));
      const dirs = res.filter(thing => !thing.includes("."));
      if (files) files.forEach(file => fileArray.push([dir, file]));
      if (dirs) await Promise.all(dirs.map(dir2 => this._traverse(resolve(dir, dir2), fileArray)));
      return fileArray;
    } catch (err) {
      await fs.ensureDir(dir).catch(console.error);
      throw err;
    }
  }

  async _reload(dir, name) {
    const file = name.endsWith(".js") ? name : `${name}.js`;
    const files = await this._traverse(dir);
    const piece = files.filter(([, f]) => f === file)[0];
    if (!piece) throw `Could not find a reloadable file named ${file.slice(0, -3)}`;
    return { file, piece };
  }

  /** FUNCTIONS */

  async _loadFunctions() {
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.functions),
      this._traverse(this.clientDirs.functions),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadFunction.bind(this));
    if (userFiles) userFiles.forEach(this._loadFunction.bind(this));
    this.client.emit("log", `Loaded ${Object.keys(this).length} functions.`);
  }

  _loadFunction([dir, file]) {
    const func = this.constructor._require(join(dir, file));
    this[file.split(".")[0]] = func;
    return func;
  }

  async _reloadFunction(name) {
    const { piece: func, file } = await this._reload(this.clientDirs.functions, name);
    if (this[file.slice(-3)]) delete this[file.slice(0, -3)];
    const fun = this._loadFunction(func);
    if (fun.init) fun.init(this.client);
    return `Successfully reloaded the function ${file.slice(0, -3)}.`;
  }

  /** EVENTS */

  async _loadEvents() {
    this.client.eventHandlers.forEach((listener, event) => this.client.removeListener(event, listener));
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.events),
      this._traverse(this.clientDirs.events),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadEvent.bind(this));
    if (userFiles) userFiles.forEach(this._loadEvent.bind(this));
    this.client.emit("log", `Loaded ${this.client.eventHandlers.size} events.`);
  }

  _loadEvent([dir, file]) {
    const name = file.split(".")[0];
    this.client.eventHandlers.set(name, (...args) => this.constructor._require(join(dir, file)).run(this.client, ...args));
    this.client.on(name, this.client.eventHandlers.get(name));
  }

  async _reloadEvent(name) {
    const { piece: evt, file } = await this._reload(this.clientDirs.events, name);
    const listener = this.client.eventHandlers.get(file.slice(0, -3));
    if (listener) this.client.removeListener(name, listener);
    this._loadFunction(evt);
    return `Successfully reloaded the event ${file.slice(0, -3)}.`;
  }

  /** COMMANDS */
  async _loadCommands() {
    this.client.commands.clear();
    this.client.aliases.clear();
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.commands),
      this._traverse(this.clientDirs.commands),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadCommand.bind(this));
    if (userFiles) userFiles.forEach(this._loadCommand.bind(this));
    this.client.emit("log", `Loaded ${this.client.commands.size} commands with ${this.client.aliases.size} aliases.`);
  }

  _loadCommand([dir, file]) {
    const command = this.constructor._require(join(dir, file));
    const dirArray = dir.split(sep);
    const fullCat = dirArray.splice(dirArray.indexOf("commands") + 1);
    command.help.fullCategory = fullCat.slice();
    const subcat = fullCat.length &lt;= 1 ? "General" : fullCat.splice(-1)[0];
    const cat = fullCat.join("/");
    command.help.category = cat || "General";
    command.help.subCategory = subcat || "General";
    command.cooldown = new Map();
    command.conf.aliases = command.conf.aliases || [];
    command.conf.aliases.forEach(alias => this.client.aliases.set(alias, command.help.name));
    command.usage = new ParsedUsage(this.client, command);
    command.conf.enabled = this._disabled.command.includes(command.help.name) ? false : command.conf.enabled;
    this.client.commands.set(command.help.name, command);
    return command;
  }

  async _reloadCommand(name) {
    const file = name.endsWith(".js") ? name : `${name}.js`;
    const fullCommand = this.client.commands.get(file.slice(0, -3)) || this.client.commands.get(this.client.aliases.get(file.slice(0, -3)));
    const dirToCheck = fullCommand ? resolve(this.clientDirs.commands, ...fullCommand.help.fullCategory) : resolve(this.clientDirs.commands);
    const files = await this._traverse(dirToCheck);
    const cmd = files.filter(([, f]) => f === file)[0];
    if (!cmd) throw `Could not find a reloadable file named ${file.slice(0, -3)}`;
    fullCommand.conf.aliases.forEach(alias => this.client.aliases.delete(alias));
    const command = this._loadCommand(cmd);
    if (command.init) command.init(this.client);
    return `Successfully reloaded the command ${file.slice(0, -3)}.`;
  }


  /** INHIBITORS */

  async _loadInhibitors() {
    this.client.commandInhibitors.clear();
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.inhibitors),
      this._traverse(this.clientDirs.inhibitors),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadInhibitor.bind(this));
    if (userFiles) userFiles.forEach(this._loadInhibitor.bind(this));
    this.client.emit("log", `Loaded ${this.client.commandInhibitors.size} inhibitors.`);
  }

  _loadInhibitor([dir, file]) {
    const inhib = this.constructor._require(join(dir, file));
    inhib.conf.enabled = this._disabled.inhibitor.includes(file.split(".")[0]) ? false : inhib.conf.enabled;
    this.client.commandInhibitors.set(file.split(".")[0], inhib);
    return inhib;
  }

  async _reloadInhibitor(name) {
    const { piece: inhibitor, file } = await this._reload(this.clientDirs.inhibitors, name);
    const inhibit = this.client.commandInhibitors.get(file.slice(0, -3));
    if (inhibit) this.client.commandInhibitors.delete(file.slice(0, -3));
    const inhib = this._loadInhibitor(inhibitor);
    if (inhib.init) inhib.init(this.client);
    return `Successfully reloaded the inhibitor ${file.slice(0, -3)}.`;
  }

  /** FINALIZERS */
  async _loadFinalizers() {
    this.client.commandFinalizers.clear();
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.finalizers),
      this._traverse(this.clientDirs.finalizers),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadFinalizer.bind(this));
    if (userFiles) userFiles.forEach(this._loadFinalizer.bind(this));
    this.client.emit("log", `Loaded ${this.client.commandFinalizers.size} finalizers.`);
  }

  _loadFinalizer([dir, file]) {
    const final = this.constructor._require(join(dir, file));
    final.conf.enabled = this._disabled.finalizer.includes(file.split(".")[0]) ? false : final.conf.enabled;
    this.client.commandFinalizers.set(file.split(".")[0], final);
    return final;
  }

  async _reloadFinalizer(name) {
    const { piece: final, file } = await this._reload(this.clientDirs.finalizers, name);
    const finale = this.client.commandFinalizers.get(file.slice(0, -3));
    if (finale) this.client.commandFinalizers.delete(file.slice(0, -3));
    const finalizer = this._loadFinalizer(final);
    if (finalizer.init) finalizer.init(this.client);
    return `Successfully reloaded the finalizer ${file.slice(0, -3)}.`;
  }

  /** MONITORS */
  async _loadMonitors() {
    this.client.messageMonitors.clear();
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.monitors),
      this._traverse(this.clientDirs.monitors),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadMonitor.bind(this));
    if (userFiles) userFiles.forEach(this._loadMonitor.bind(this));
    this.client.emit("log", `Loaded ${this.client.messageMonitors.size} monitors.`);
  }

  _loadMonitor([dir, file]) {
    const monit = this.constructor._require(join(dir, file));
    monit.conf.enabled = this._disabled.monitor.includes(file.split(".")[0]) ? false : monit.conf.enabled;
    this.client.messageMonitors.set(file.split(".")[0], monit);
    return monit;
  }

  async _reloadMonitor(name) {
    const { piece: mon, file } = await this._reload(this.clientDirs.monitors, name);
    const monit = this.client.messageMonitors.get(file.slice(0, -3));
    if (monit) this.client.messageMonitors.delete(file.slice(0, -3));
    const monitor = this._loadMonitor(mon);
    if (monitor.init) monitor.init(this.client);
    return `Successfully reloaded the monitor ${file.slice(0, -3)}.`;
  }

  /** PROVIDERS */
  async _loadProviders() {
    this.client.providers.clear();
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.providers),
      this._traverse(this.clientDirs.providers),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadProvider.bind(this));
    if (userFiles) userFiles.forEach(this._loadProvider.bind(this));
    this.client.emit("log", `Loaded ${this.client.providers.size} providers.`);
  }

  _loadProvider([dir, file]) {
    const provider = this.constructor._require(join(dir, file));
    this.client.providers.set(file.split(".")[0], provider);
    return provider;
  }

  async _reloadProvider(name) {
    const { piece: pro, file } = await this._reload(this.clientDirs.providers, name);
    const provide = this.client.providers.get(file.slice(0, -3));
    if (provide) this.client.providers.delete(file.slice(0, -3));
    const provider = this._loadProvider(pro);
    if (provider.init) provider.init(this.client);
    return `Successfully reloaded the provider ${file.slice(0, -3)}.`;
  }

  /** EXTENDABLES */
  async _loadExtendables() {
    const [coreFiles, userFiles] = await Promise.all([
      this._traverse(this.coreDirs.extendables),
      this._traverse(this.clientDirs.extendables),
    ]);
    if (coreFiles) coreFiles.forEach(this._loadExtendable.bind(this));
    if (userFiles) userFiles.forEach(this._loadExtendable.bind(this));
    this.client.emit("log", `Loaded ${(coreFiles ? coreFiles.length : 0) + (userFiles ? userFiles.length : 0)} extendables.`);
  }

  _loadExtendable([dir, file]) {
    const extendable = this.constructor._require(join(dir, file));
    let myExtend;
    switch (extendable.conf.type.toLowerCase()) {
      case "set":
      case "setter":
        myExtend = { set: extendable.extend };
        break;
      case "get":
      case "getter":
        myExtend = { get: extendable.extend };
        break;
      case "method":
      default:
        myExtend = { value: extendable.extend };
        break;
    }
    extendable.conf.appliesTo.forEach((structure) => {
      Object.defineProperty(!extendable.conf.komada ? Discord[structure].prototype : require("komada")[structure].prototype, extendable.conf.method, myExtend);  // eslint-disable-line
    });
  }

  static _require(path) {
    try {
      const module = require(path); // eslint-disable-line
      return module;
    } catch (err) {
      console.error(err);
      return null;
    } finally {
      delete require.cache[path];
    }
  }


}

module.exports = Loader;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <div class="footer-text">Welcome to Komada's Documentation! Discord: <a href="https://discord.gg/FpEFSyY" target="_blank">https://discord.gg/FpEFSyY</a></div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
